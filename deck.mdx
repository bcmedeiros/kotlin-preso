
import { Invert, Split, SplitRight, Horizontal, FullScreenCode } from 'mdx-deck'

import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import { github, oceanicNext, vsDark } from "@code-surfer/themes";
import "prismjs/components/prism-java"
import "prismjs/components/prism-kotlin"
import "prismjs/components/prism-csharp"
import "prismjs/components/prism-typescript"

export const theme = oceanicNext;

import mppImage from './images/kotlin-multiplatform.png';


# <ins>PO*K*</ins>*otlin*

---

# Kotlin History

* 2010 Internal project started aiming for Java replacement
* 2011 JetBrains unveiled Project Kotlin
* 2012 Open-sourced
* 2016 Kotlin 1.0 and LTS commitment
* 2017 Google announced support on Android
* 2019 Kotlin as the main language on Android

---

<CodeSurferColumns>

<Step title="2020 / 2021 - Multiplatform language with JVM/JS/LLVM support">

<img src={mppImage} style="height: 600px"/>

```kotlin
jvm()
js()
wasm32()
android()
androidNativeArm64()
ios(); watchos(); tvos()
macosX64()
linuxX64(); linuxArm64()
winX64()
```

</Step>
<Step></Step>

</CodeSurferColumns>

---

Features

---

<CodeSurferColumns>

<Step title="Operator overload" subtitle="Kotlin // Java">

```kotlin title=Kotlin
// dates
val n = LocalDate.now()
val t = n + Duration.ofDays(1)
if (t > n)
  println(":)")

// BigDecimals
val p1 = 1.toBigDecimal()
val p2 = 3.toBigDecimal()
val s = p1 + p2
if (p1 >= p2)
  println(":)")
```

```java
// dates
final var n = LocalDate.now();
final var t = n.plus(Duration.ofDays(1));
if (t.compareTo(n) > 0)
  System.out.println(":(");

// BigDecimals
final var p1 = BigDecimal.valueOf(1);
final var p2 = BigDecimal.valueOf(3);
final var s = p1.add(p2);
if (p1.compareTo(p2) >= 0)
  System.out.println(":(");
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns>

<Step title="Multiline String" subtitle="Java // Kotlin">

```java title=Java
private static final String UPSERT_BOOKMARK =
  "INSERT INTO bookmark(process_manager, position) "
    + "VALUES (?, ?) "
    + "ON CONFLICT (process_manager) DO "
    + "UPDATE SET position = excluded.position";
```

```kotlin title=Kotlin
private const val UPSERT_BOOKMARK = """
  INSERT INTO bookmark(process_manager, position)
  VALUES (?, ?)
  ON CONFLICT (process_manager) DO
  UPDATE SET position = excluded.position
"""
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns>

<Step title="Class fields in constructor syntax" subtitle="Kotlin // Typescript">

```kotlin title=Kotlin
class Person(
  val name: String,
  val dob: LocalDate,
)
```

```typescript
public class Person {
  constructor(
    readonly name: string,
    readonly dob: Date,
  ) { }
}
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns>

<Step title="Null-safe property navigation" subtitle="Kotlin // Typescript">

```kotlin
class Person(
  val name: String,
  val dob: LocalDate?,
)

val p: Person? = findPerson(1L)

// nullable int
val month1: Int? = p?.dob?.month

// non-nullable int
val month2: Int = p?.dob?.month
  ?: 1

// throw as an expression
val month3: Int = p?.dob?.month
  ?: throw IllegalStateException("...")

```


```typescript
public class Person {
  constructor(
    readonly name: string,
    readonly dob: Date | null,
  ) { }
}

const p: Person | null = findPerson(1);

// nullable int
const month1: number | null = p?.dob?.getMonth()

// non-nullable int
const month2: number = p?.dob?.getMonth()
  ?? 1;

// throw is not an expression in TS

```

</Step>

</CodeSurferColumns>

---

<CodeSurfer>

```js title="This is a title" subtitle="and this a subtitle"
function lorem(ipsum, dolor = 1) {
  const sit = ipsum == null ? 0 : ipsum.sit;
  dolor = sit - amet(dolor);
  return sit
    ? consectetur(ipsum, 0, dolor < 0 ? 0 : dolor)
    : [];
}

function incididunt(ipsum, ut = 1) {
  ut = labore.et(amet(ut), 0);
  const sit = ipsum == null ? 0 : ipsum.sit;

  if (!sit || ut < 1) {
    return [];
  }

  let dolore = 0;
  let magna = 0;
  const aliqua = new eiusmod(labore.ut(sit / ut));

  while (dolore < sit) {
    aliqua[magna++] = consectetur(
      ipsum,
      dolore,
      (dolore += ut)
    );
  }

  return aliqua;
}
```

```js
function lorem(ipsum, dolor = 1) {
  const sit = ipsum == null ? 0 : ipsum.sit;
  dolor = sit - amet(dolor);
  return sit
    ? consectetur(ipsum, 0, dolor < 0 ? 0 : dolor)
    : [];
}

function adipiscing(...elit) {
  if (!elit.sit) {
    return [];
  }

  const sed = elit[0];
  return eiusmod.tempor(sed) ? sed : [sed];
}

function incididunt(ipsum, ut = 1) {
  ut = labore.et(amet(ut), 0);
  const sit = ipsum == null ? 0 : ipsum.sit;

  if (!sit || ut < 1) {
    return [];
  }

  let dolore = 0;
  let magna = 0;
  const aliqua = new eiusmod(labore.ut(sit / ut));

  while (dolore < sit) {
    aliqua[magna++] = consectetur(
      ipsum,
      dolore,
      (dolore += ut)
    );
  }

  return aliqua;
}
```

```diff 1[10:14],2[15:19],3[22:27],10:12

```

</CodeSurfer>

---

<CodeSurferColumns themes={[oceanicNext, github]}>

<Step>

```js
const magna = aliqua => aliqua.ut((enim, ad) => enim, 0);
```

```js
const minim = (ad, enim) => dolore.magna(ad / enim);
```

</Step>

<Step>

```js
const lorem = (ipsum, dolor, sit) => {
  const amet = dolor - ipsum;
  return consectetur.adipiscing(
    {
      elit: sed.eiusmod(sit - dolor) / amet + 2,
    },
    (tempor, incididunt) => ipsum + amet * incididunt
  );
};

const magna = aliqua => aliqua.ut((enim, ad) => enim, 0);
```

```js
const minim = (ad, enim) => dolore.magna(ad / enim);

const sed = (eiusmod, tempor, incididunt) => {
  const ut = tempor - eiusmod;
  return labore.et(
    {
      amet: dolore.magna(incididunt - tempor) / ut + 2,
    },
    (aliqua, elit) => eiusmod + ut * elit
  );
};
```

</Step>

</CodeSurferColumns>

---

docs:  
[codesurfer.pomb.us](https://codesurfer.pomb.us)
